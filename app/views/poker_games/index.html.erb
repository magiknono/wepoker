 <script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?libraries=places&key=<%= ENV["GOOGLE_API_KEY_CLIENT"] %>">
</script>
<%= javascript_tag do %>
function initializeAutocomplete(id) {
  var element = document.getElementById(id);
  if (element) {
    var autocomplete = new google.maps.places.Autocomplete(element, { types: ['geocode'] });
    google.maps.event.addListener(autocomplete, 'place_changed', onPlaceChanged);
  }
}

function onPlaceChanged() {
  var place = this.getPlace();

  // console.log(place);  // Uncomment this line to view the full object returned by Google API.

  for (var i in place.address_components) {
    var component = place.address_components[i];
    for (var j in component.types) {  // Some types are ["country", "political"]
      var type_element = document.getElementById(component.types[j]);
      if (type_element) {
        type_element.value = component.long_name;
      }
    }
  }
}

google.maps.event.addDomListener(window, 'load', function() {
  initializeAutocomplete('user_input_autocomplete_address');
});
<% end %>




 <div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
        <div class="user-form-devise">
<form>

  <input id="user_input_autocomplete_address" placeholder="Votre adresse ou ville..." name="q" type="text" size="40">
  <SELECT NAME="km" >
    <OPTION VALUE="10" SELECTED>Distance
<OPTION VALUE="10">10
<OPTION VALUE="20">20
<OPTION VALUE="30">30
<OPTION VALUE="40">40
<OPTION VALUE="50">50
<OPTION VALUE="60">60
<OPTION VALUE="70">70
<OPTION VALUE="80">80
<OPTION VALUE="90">90

</SELECT>
  <INPUT id="refresh" TYPE="submit" VALUE=" rechercher ">
</form>
</div>
<% if params[:q] != nil %>
 <h3>Pokergames listing</h3>
 <% @pokerg = PokerGame.all.near(params[:q],params[:km]).paginate(page: params[:page], per_page: 2) %>
<% @pokerg.each do |mypgames| %>

<div class="user-form-devise">

  <%= link_to(poker_game_path(mypgames.id)) do %>
  <h2><%= mypgames.description %></h2>
  <% end %>
   le <%= mypgames.date.strftime("%d/%m/%Y") %> Ã  <%= mypgames.hour.strftime("%H:%M") %>
  <p><%= mypgames.gametype %></p>



    </div>
  </div>
<% end %>
<%= will_paginate @pokerg %>
<% end %>

  </div>
</div>

<%= content_for(:pokergames_change_index) do %>
<%= javascript_tag do %>
$( document ).ready(function() {
    $("#user_input_autocomplete_address").on("focusout",function() {
    $("#refresh").trigger("click");
});
});

<% end %>
<% end %>